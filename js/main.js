function updateStoredTodoList(){localStorage.setItem("todo",JSON.stringify(todo))}function firstTimeLoadLocalStorage(){null===localStorage.getItem("todo")&&(localStorage.setItem("todo",JSON.stringify(todoListExample)),todo=JSON.parse(localStorage.getItem("todo")))}function createListsAndElements(){updateStoredTodoList(),$(".list-container").empty(),$.each(todo,function(n,e){var t=createListFromJson(n,e);$(".list-container").append(t);var o="",l="";$.each(e.openElements,function(e,t){o+=createElementsFromJson(n,e,t,"open")}),$("#list-"+n).append(o),$.each(e.closedElements,function(e,t){l+=createElementsFromJson(n,e,t,"closed")}),$("#list-"+n).append(l)}),$(".list-container").append('<div class="add-list" onclick="createNewList()"><i class="fas fa-plus"></i> Add another item</div>')}function createListFromJson(e,t){return'<div class="list"><div class="list-header"><div class="list-title">'+t.list_name+'</div><div class="button-container"><div class="list-button" onclick="toggleDropdown('+e+')"><i class="fas fa-ellipsis-h"></i></div><div class="dropdown hidden" id="id-dropdown-'+e+'"><div class="dropdown-title"><div class="dropdown-title-text">List Actions</div><i class="fas fa-times" onclick="toggleDropdown('+e+')"></i></div><div class="dropdown-element" onclick="prepareModalRenameList('+e+')">Rename List</div><div class="dropdown-element" onclick="deleteList('+e+')">Delete List</div></div></div></div><div class="list-body" id="list-'+e+'"></div><div class="list-footer" onclick="buttonOpenElementModalForElementCreate('+e+')"><i class="fas fa-plus"></i> Add another item</div></div>'}function createElementsFromJson(e,t,n,o){var l="",i="",s="",d="",a="";return"open"===o&&(i="status-open",s="elementStatusToClosed",d="far fa-square",a="open"),"closed"===o&&(i="status-closed",s="elementStatusToOpen",d="fas fa-check-square",a="closed"),l="<div class='list-element "+i+"'><div class='status' onclick='"+s+"("+e+", "+t+")'><i class=\""+d+"\"></i></div><div class='title' onclick='buttonOpenElementModalForElementUpdate("+e+", "+t+', "'+a+"\")'>"+n.title+"</div><div class='position'>","open"===o&&(l+="<div class='position-up position-element' onclick='increaseElementPosition("+e+", "+t+")'><i class='fas fa-caret-up'></i></div><div class='position-down position-element' onclick='decreaseElementPosition("+e+", "+t+")'><i class='fas fa-caret-down'></i></div>"),"closed"===o&&(l+="<div class='promote' onclick='prepareModalDelete("+e+", "+t+')\'><i class="fas fa-trash"></i></div></div>'),l+="</div></div>"}function reorderList(s,d,a){$.each(todo,function(e,t){if(e===parseInt(s)){if("up"===a&&0!==d&&1<t.openElements.length){var n=t.openElements[d],o=t.openElements[d-1];t.openElements[d]=o,t.openElements[d-1]=n}if("down"===a&&d!==t.openElements.length-1&&1<t.openElements.length){var l=t.openElements[d],i=t.openElements[d+1];t.openElements[d]=i,t.openElements[d+1]=l}}}),createListsAndElements()}function increaseElementPosition(e,t){reorderList(e,t,"up")}function decreaseElementPosition(e,t){reorderList(e,t,"down")}function changeElementStatus(e,t,n){var o=findElementList(e,"open"),l=findElementList(e,"closed"),i=findElementList(e,"deleted"),s=null;"open"===n&&null!==(s=findElement(e,t,"closed"))&&(l.splice(t,1),o.push(s)),"closed"===n&&(s=findElement(e,t,"open"),o.splice(t,1),l.push(s)),"deleted"===n&&(s=findElement(e,t,"closed"),l.splice(t,1),i.push(s)),createListsAndElements()}function elementStatusToDeleted(e,t){changeElementStatus(e,t,"deleted")}function elementStatusToClosed(e,t){changeElementStatus(e,t,"closed")}function elementStatusToOpen(e,t){changeElementStatus(e,t,"open")}function createNewList(){todo.length<5&&(todo.push({list_name:"New List",openElements:[],closedElements:[],deletedElements:[]}),createListsAndElements())}function findElementList(t,e){var n=null;return"open"===e&&$.each(todo,function(e){e===parseInt(t)&&(n=todo[e].openElements)}),"closed"===e&&$.each(todo,function(e){e===parseInt(t)&&(n=todo[e].closedElements)}),"deleted"===e&&$.each(todo,function(e){e===parseInt(t)&&(n=todo[e].deletedElements)}),n}function findElement(n,o,e){var l=null;return"open"===e&&$.each(todo,function(t,e){t===parseInt(n)&&$.each(e.openElements,function(e){e===parseInt(o)&&(l=todo[t].openElements[e])})}),"closed"===e&&$.each(todo,function(t,e){t===parseInt(n)&&$.each(e.closedElements,function(e){e===parseInt(o)&&(l=todo[t].closedElements[e])})}),"deleted"===e&&$.each(todo,function(t,e){t===parseInt(n)&&$.each(e.closedElements,function(e){e===parseInt(o)&&(l=todo[t].deletedElements[e])})}),l}function findList(t){var n=null;return $.each(todo,function(e){e===parseInt(t)&&(n=todo[e])}),n}function toggleDropdown(e){$("#id-dropdown-"+e).hasClass("hidden")?($(".dropdown").removeClass("flex"),$(".dropdown").addClass("hidden"),$("#id-dropdown-"+e).addClass("flex"),$("#id-dropdown-"+e).removeClass("hidden")):($("#id-dropdown-"+e).removeClass("flex"),$("#id-dropdown-"+e).addClass("hidden"))}function toggleRenameListModal(){$("#id-rename-modal").hasClass("hidden")?($("#id-rename-modal").addClass("flex"),$("#id-rename-modal").removeClass("hidden")):($("#id-rename-modal").removeClass("flex"),$("#id-rename-modal").addClass("hidden"))}function prepareModalRenameList(e){$("#modal-rename-list").val(e),$("#modal-list-rename-input").val(todo[e].list_name),toggleRenameListModal()}function deleteList(e){todo.splice(e,1),createListsAndElements()}function renameList(){var e=findList($("#modal-rename-list").val()),t=$("#modal-list-rename-input").val();""!==t&&(e.list_name=t,createListsAndElements(),toggleRenameListModal())}function toggleElementModalVisibility(){$("#id-element-modal").hasClass("hidden")?($("#id-element-modal").addClass("flex"),$("#id-element-modal").removeClass("hidden")):($("#id-element-modal").removeClass("flex"),$("#id-element-modal").addClass("hidden"))}function buttonOpenElementModalForElementUpdate(e,t,n){var o=findElement(e,t,n);$("#modal-title").val(o.title),$("#modal-list").val(e),$("#modal-element").val(t),$("#modal-status").val(n),""!==o.description&&$("#modal-description").val(o.description),$(".button-create").hide(),$(".button-save").show(),toggleElementModalVisibility()}function buttonOpenElementModalForElementCreate(e){$("#modal-title").val(""),$("#modal-description").val(""),$(".button-create").show(),$(".button-save").hide(),$("#modal-list").val(e),toggleElementModalVisibility()}function updateElement(){var e=findElement($("#modal-list").val(),$("#modal-element").val(),$("#modal-status").val());e.title=$("#modal-title").val(),e.description=$("#modal-description").val(),toggleElementModalVisibility(),createListsAndElements()}function createNewElement(){var e=$("#modal-list").val(),t=$("#modal-title").val(),n=$("#modal-description").val(),o=findElementList(e,"open");""!==t&&(o.push({title:t,description:n,classification:"OS",user:"Edward Wright",due:"7/4/2019",created:"1/4/2019",checklist:[{name:"checklist Item 1",status:"unchecked"},{name:"checklist Item 2",status:"checked"}]}),toggleElementModalVisibility(),createListsAndElements())}function toggleConfirmationModalVisibility(){$("#id-confirmation-modal").hasClass("hidden")?($("#id-confirmation-modal").addClass("flex"),$("#id-confirmation-modal").removeClass("hidden")):($("#id-confirmation-modal").removeClass("flex"),$("#id-confirmation-modal").addClass("hidden"))}function deleteElement(){elementStatusToDeleted($("#modal-confirm-list").val(),$("#modal-confirm-element").val()),toggleConfirmationModalVisibility()}function prepareModalDelete(e,t){$("#modal-confirm-list").val(e),$("#modal-confirm-element").val(t),toggleConfirmationModalVisibility()}var todo=JSON.parse(localStorage.getItem("todo"));createListsAndElements(),autosize($("textarea"));var todoListExample=[{list_name:"Default List",openElements:[{title:"This is an item that is yet to be completed",description:"This is the description for the item that is yet to be completed",classification:"",user:"",due:"",created:"",checklist:[{name:"checklist Item 1",status:"unchecked"}]}],closedElements:[{title:"This is an item that has been completed",description:"This is the description for the item that has been completed",classification:"",user:"",due:"",created:"",checklist:[{name:"checklist Item 1",status:"unchecked"}]}],deletedElements:[]}];firstTimeLoadLocalStorage();