function firstTimeLoadLocalStorage(){null===localStorage.getItem("todo")&&(localStorage.setItem("todo",JSON.stringify(todoListExample)),todo=JSON.parse(localStorage.getItem("todo")))}function updateStoredTodoList(){localStorage.setItem("todo",JSON.stringify(todo))}function createListsAndElements(){updateStoredTodoList(),$(".list-container").empty(),$.each(todo,function(i,e){var t='<div class="list"><div class="list-header"><div class="list-title">'+e.list_name+'</div><div class="button-container"><div class="list-button" onclick="toggleDropdown('+i+')"><i class="fas fa-ellipsis-h"></i></div><div class="dropdown hidden" id="id-dropdown-'+i+'"><div class="dropdown-title"><div class="dropdown-title-text">List Actions</div><i class="fas fa-times" onclick="toggleDropdown('+i+')"></i></div><div class="dropdown-element" onclick="prepareModalRenameList('+i+')">Rename List</div><div class="dropdown-element" onclick="deleteList('+i+')">Delete List</div></div></div></div><div class="list-body" id="list-'+i+'"></div><div class="list-footer" onclick="prepareModalCreate('+i+')"><i class="fas fa-plus"></i> Add another item</div></div>';$(".list-container").append(t);var l="",n="";$.each(e.openElements,function(e,t){l+="<div class='list-element status-open'><div class='status' onclick='elementStatusToClosed("+i+", "+e+")'><i class=\"far fa-square\"></i></div><div class='title' onclick='prepareModalUpdate("+i+", "+e+', "open")\'>'+t.title+"</div><div class='position'><div class='position-up position-element' onclick='increaseElementPosition("+i+", "+e+")'><i class='fas fa-caret-up'></i></div><div class='position-down position-element'onclick='decreaseElementPosition("+i+", "+e+")'><i class='fas fa-caret-down'></i></div></div></div>"}),$("#list-"+i).append(l),$.each(e.closedElements,function(e,t){n+="<div class='list-element status-closed'><div class='status' onclick='elementStatusToOpen("+i+", "+e+")'><i class=\"fas fa-check-square\"></i></div><div class='title title-closed' onclick='prepareModalUpdate("+i+", "+e+', "closed")\'>'+t.title+"</div><div class='position'><div class='promote' onclick='prepareModalDelete("+i+", "+e+')\'><i class="fas fa-trash"></i></div></div></div>'}),$("#list-"+i).append(n)}),$(".list-container").append('<div class="add-list" onclick="createNewList()"><i class="fas fa-plus"></i> Add another item</div>')}function reorderList(s,d,a){$.each(todo,function(e,t){if(e===parseInt(s)){if("up"===a&&0!==d&&1<t.openElements.length){var i=t.openElements[d],l=t.openElements[d-1];t.openElements[d]=l,t.openElements[d-1]=i}if("down"===a&&d!==t.openElements.length-1&&1<t.openElements.length){var n=t.openElements[d],o=t.openElements[d+1];t.openElements[d]=o,t.openElements[d+1]=n}}}),createListsAndElements()}function increaseElementPosition(e,t){reorderList(e,t,"up")}function decreaseElementPosition(e,t){reorderList(e,t,"down")}function createNewList(){todo.length<5&&(todo.push({list_name:"New List",openElements:[],closedElements:[],deletedElements:[]}),createListsAndElements())}function findElementList(t,e){var i=null;return"open"===e&&$.each(todo,function(e){e===parseInt(t)&&(i=todo[e].openElements)}),"closed"===e&&$.each(todo,function(e){e===parseInt(t)&&(i=todo[e].closedElements)}),"deleted"===e&&$.each(todo,function(e){e===parseInt(t)&&(i=todo[e].deletedElements)}),i}function findElement(i,l,e){var n=null;return"open"===e&&$.each(todo,function(t,e){t===parseInt(i)&&$.each(e.openElements,function(e){e===parseInt(l)&&(n=todo[t].openElements[e])})}),"closed"===e&&$.each(todo,function(t,e){t===parseInt(i)&&$.each(e.closedElements,function(e){e===parseInt(l)&&(n=todo[t].closedElements[e])})}),"deleted"===e&&$.each(todo,function(t,e){t===parseInt(i)&&$.each(e.closedElements,function(e){e===parseInt(l)&&(n=todo[t].deletedElements[e])})}),n}function changeElementStatus(e,t,i){var l=findElementList(e,"open"),n=findElementList(e,"closed"),o=findElementList(e,"deleted"),s=null;"open"===i&&null!==(s=findElement(e,t,"closed"))&&(n.splice(t,1),l.push(s)),"closed"===i&&(s=findElement(e,t,"open"),l.splice(t,1),n.push(s)),"deleted"===i&&(s=findElement(e,t,"closed"),n.splice(t,1),o.push(s)),createListsAndElements()}function elementStatusToDeleted(e,t){changeElementStatus(e,t,"deleted")}function elementStatusToClosed(e,t){changeElementStatus(e,t,"closed")}function elementStatusToOpen(e,t){changeElementStatus(e,t,"open")}function toggleElementModalVisibility(){$("#id-element-modal").hasClass("hidden")?($("#id-element-modal").addClass("flex"),$("#id-element-modal").removeClass("hidden")):($("#id-element-modal").removeClass("flex"),$("#id-element-modal").addClass("hidden"))}function toggleConfirmationModalVisibility(){$("#id-confirmation-modal").hasClass("hidden")?($("#id-confirmation-modal").addClass("flex"),$("#id-confirmation-modal").removeClass("hidden")):($("#id-confirmation-modal").removeClass("flex"),$("#id-confirmation-modal").addClass("hidden"))}function prepareModalUpdate(e,t,i){var l=findElement(e,t,i);$("#modal-title").val(l.title),$("#modal-list").val(e),$("#modal-element").val(t),$("#modal-status").val(i),""!==l.description&&$("#modal-description").val(l.description),$(".button-create").hide(),$(".button-save").show(),toggleElementModalVisibility()}function prepareModalCreate(e){$("#modal-title").val(""),$("#modal-description").val(""),$(".button-create").show(),$(".button-save").hide(),$("#modal-list").val(e),toggleElementModalVisibility()}function prepareModalDelete(e,t){$("#modal-confirm-list").val(e),$("#modal-confirm-element").val(t),toggleConfirmationModalVisibility()}function deleteElement(){elementStatusToDeleted($("#modal-confirm-list").val(),$("#modal-confirm-element").val()),toggleConfirmationModalVisibility()}function updateElement(){var e=findElement($("#modal-list").val(),$("#modal-element").val(),$("#modal-status").val());e.title=$("#modal-title").val(),e.description=$("#modal-description").val(),toggleElementModalVisibility(),createListsAndElements()}function createNewElement(){var e=$("#modal-list").val(),t=$("#modal-title").val(),i=$("#modal-description").val(),l=findElementList(e,"open");""!==t&&(l.push({title:t,description:i,classification:"OS",user:"Edward Wright",due:"7/4/2019",created:"1/4/2019",checklist:[{name:"checklist Item 1",status:"unchecked"},{name:"checklist Item 2",status:"checked"}]}),toggleElementModalVisibility(),createListsAndElements())}function findList(t){var i=null;return $.each(todo,function(e){e===parseInt(t)&&(i=todo[e])}),i}function toggleDropdown(e){$("#id-dropdown-"+e).hasClass("hidden")?($(".dropdown").removeClass("flex"),$(".dropdown").addClass("hidden"),$("#id-dropdown-"+e).addClass("flex"),$("#id-dropdown-"+e).removeClass("hidden")):($("#id-dropdown-"+e).removeClass("flex"),$("#id-dropdown-"+e).addClass("hidden"))}function toggleRenameListModal(){$("#id-rename-modal").hasClass("hidden")?($("#id-rename-modal").addClass("flex"),$("#id-rename-modal").removeClass("hidden")):($("#id-rename-modal").removeClass("flex"),$("#id-rename-modal").addClass("hidden"))}function prepareModalRenameList(e){$("#modal-rename-list").val(e),$("#modal-list-rename-input").val(todo[e].list_name),toggleRenameListModal()}function deleteList(e){todo.splice(e,1),createListsAndElements()}function renameList(){var e=findList($("#modal-rename-list").val()),t=$("#modal-list-rename-input").val();""!==t&&(e.list_name=t,createListsAndElements(),toggleRenameListModal())}var todoListExample=[{list_name:"Default List",openElements:[{title:"This is an item that is yet to be completed",description:"This is the description for the item that is yet to be completed",classification:"",user:"",due:"",created:"",checklist:[{name:"checklist Item 1",status:"unchecked"}]}],closedElements:[{title:"This is an item that has been completed",description:"This is the description for the item that has been completed",classification:"",user:"",due:"",created:"",checklist:[{name:"checklist Item 1",status:"unchecked"}]}],deletedElements:[]}],todo=JSON.parse(localStorage.getItem("todo"));firstTimeLoadLocalStorage(),createListsAndElements(),autosize($("textarea"));